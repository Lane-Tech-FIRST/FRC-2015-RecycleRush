

package org.usfirst.frc.team4645.robot;




import edu.wpi.first.wpilibj.SampleRobot;
import edu.wpi.first.wpilibj.Joystick;
import edu.wpi.first.wpilibj.RobotDrive;
import edu.wpi.first.wpilibj.Talon;

/**
 * The VM is configured to automatically run this class, and to call the
 * functions corresponding to each mode, as described in the SimpleRobot
 * documentation. If you change the name of this class or the package after
 * creating this project, you must also update the manifest file in the resource
 * directory.
 */
 
public class Robot extends SampleRobot {

    public Talon frontLeft = new Talon(1);
    public Talon frontRight = new Talon(2);
    public Talon backLeft = new Talon(3);
    public Talon backRight = new Talon(4);
    public Joystick stick = new Joystick(1);
    public RobotDrive drive = new RobotDrive(frontLeft, frontRight, backLeft, backRight);

    /**
     * This function is called once each time the robot enters autonomous mode.
     */
     
    public void autonomous() 
    {

    }

    /**
     * This function is called once each time the robot enters operator control.
     */
    public void operatorControl() 
    {

        drive.setSafetyEnabled(true);

        while (isEnabled()) 
        {

            while (drive.isSafetyEnabled())
            {

                double tempYMag = (stick.getY()) / 2;
                double tempTwist = (stick.getTwist()) / 2;
                
                boolean check = false;
                
                
                if (stick.getTrigger() == true) 
                {
  
                    check = true;
                  
                    tempYMag = 0.0; // temporary y magnitude used for strafing when the trigger is pressed.
                }
                
               if (Math.abs(stick.getTwist()) <= 0.1 && Math.abs(stick.getX()) <= 0.1 && Math.abs(tempYMag) <= 0.1 && Math.abs(stick.getY()) <= 0.006)
               {
                   drive.mecanumDrive_Cartesian(0,0,stick.getX() / 1.5,0);
               }
               else
               {
                drive.mecanumDrive_Cartesian(tempYMag / 1.5, -stick.getTwist() / 1.5, stick.getX() / 1.5, 0.0);
               }
               
               //temp y mag MUST BE divided by AT LEAST 1.5. When the magnitude is at full power the drivetrain stutters and rotates when the stick is idle.  
              
               System.out.println("Stick: " + tempYMag + ", " + -stick.getTwist() + ", " + stick.getX() + "," + check);
               
               //Prints stats to monitor.

            }
        }
    }

    /**
     * This function is called once each time the robot enters test mode.
     */
     
    public void test()
    {

    }
}
